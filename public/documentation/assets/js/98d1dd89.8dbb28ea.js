"use strict";(self.webpackChunktea_docs=self.webpackChunktea_docs||[]).push([[9480],{6544:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"docs/technical-guide/ci-cd-pipeline/pipeline-overview","title":"CI/CD Pipeline Overview","description":"The TEA Platform CI/CD pipeline follows a streamlined two-gate GitOps approach with automated quality checks and deployments to Azure staging and production environments.","source":"@site/docs/docs/technical-guide/ci-cd-pipeline/pipeline-overview.md","sourceDirName":"docs/technical-guide/ci-cd-pipeline","slug":"/docs/technical-guide/ci-cd-pipeline/pipeline-overview","permalink":"/documentation/docs/technical-guide/ci-cd-pipeline/pipeline-overview","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Christopher Burr","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"teaSidebar","previous":{"title":"CI/CD Pipeline","permalink":"/documentation/category/cicd-pipeline"},"next":{"title":"Changelog","permalink":"/documentation/docs/technical-guide/ci-cd-pipeline/changelog"}}');var s=i(6070),t=i(4409);const r={sidebar_position:1},o="CI/CD Pipeline Overview",a={},c=[{value:"Two-Gate Architecture",id:"two-gate-architecture",level:2},{value:"Gate 1: Pre-commit Hooks (Fast, Local)",id:"gate-1-pre-commit-hooks-fast-local",level:3},{value:"Gate 2: GitHub Actions (Comprehensive, Container-based)",id:"gate-2-github-actions-comprehensive-container-based",level:3},{value:"1. <code>ci.yaml</code> - Continuous Integration",id:"1-ciyaml---continuous-integration",level:4},{value:"2. <code>integration-deploy.yaml</code> - Integration &amp; Deployment",id:"2-integration-deployyaml---integration--deployment",level:4},{value:"3. <code>release.yaml</code> - Production Release",id:"3-releaseyaml---production-release",level:4},{value:"Branch Strategy",id:"branch-strategy",level:2},{value:"Key Improvements",id:"key-improvements",level:2},{value:"Simplified Configuration",id:"simplified-configuration",level:3},{value:"Performance Optimizations",id:"performance-optimizations",level:3},{value:"Developer Experience",id:"developer-experience",level:3},{value:"Quality Gates",id:"quality-gates",level:2},{value:"Gate 1 (Pre-commit)",id:"gate-1-pre-commit",level:3},{value:"Gate 2 (GitHub Actions)",id:"gate-2-github-actions",level:3},{value:"Tools &amp; Technologies",id:"tools--technologies",level:2},{value:"Version Control &amp; CI/CD",id:"version-control--cicd",level:3},{value:"Quality Tools",id:"quality-tools",level:3},{value:"Infrastructure",id:"infrastructure",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Workflow Files",id:"workflow-files",level:2},{value:"<code>ci.yaml</code>",id:"ciyaml",level:3},{value:"<code>integration-deploy.yaml</code>",id:"integration-deployyaml",level:3},{value:"<code>release.yaml</code>",id:"releaseyaml",level:3},{value:"Rollback Strategy",id:"rollback-strategy",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cicd-pipeline-overview",children:"CI/CD Pipeline Overview"})}),"\n",(0,s.jsx)(n.p,{children:"The TEA Platform CI/CD pipeline follows a streamlined two-gate GitOps approach with automated quality checks and deployments to Azure staging and production environments."}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TB\n    %% Developer workflow\n    Dev[Developer] --\x3e|Code changes| LocalDev[Local Development]\n    LocalDev --\x3e|git add| PreCommit{Pre-commit Hooks}\n\n    %% Gate 1: Pre-commit checks (Fast, Local)\n    PreCommit --\x3e|Python| RuffFormat[Ruff Format]\n    PreCommit --\x3e|All| FileChecks[Syntax & File Checks]\n    \n    RuffFormat --\x3e CommitReady\n    FileChecks --\x3e CommitReady\n\n    CommitReady{Checks Pass?} --\x3e|Yes| LocalCommit[Local Commit]\n    CommitReady --\x3e|No| FixIssues[Fix Issues]\n    FixIssues --\x3e LocalDev\n\n    %% Git workflow\n    LocalCommit --\x3e|git push| RemoteRepo[(GitHub Repository)]\n\n    %% Gate 2: GitHub Actions (Comprehensive)\n    RemoteRepo --\x3e BranchProtection{Branch Protection}\n    BranchProtection --\x3e|Trigger| GitHubActions[GitHub Actions]\n\n    %% CI Pipeline (ci.yaml)\n    GitHubActions --\x3e CIPipeline[CI Pipeline]\n    CIPipeline --\x3e ParallelChecks{Parallel Execution}\n    \n    %% Parallel quality checks\n    ParallelChecks --\x3e BackendQuality[Backend: Ruff + MyPy]\n    ParallelChecks --\x3e FrontendQuality[Frontend: Ultracite + TSC]\n    ParallelChecks --\x3e BackendUnitTests[Backend: Unit Tests]\n    ParallelChecks --\x3e FrontendUnitTests[Frontend: Unit Tests]\n\n    %% Coverage gates\n    BackendUnitTests --\x3e BackendCoverage{Coverage \u2265 90%?}\n    FrontendUnitTests --\x3e FrontendCoverage{Coverage \u2265 90%?}\n    BackendQuality --\x3e QualityGate{Quality Pass?}\n    FrontendQuality --\x3e QualityGate\n\n    BackendCoverage --\x3e|No| BuildFails[Build Fails \u274c]\n    FrontendCoverage --\x3e|No| BuildFails\n    QualityGate --\x3e|No| BuildFails\n\n    %% Integration Pipeline (integration-deploy.yaml)\n    BackendCoverage --\x3e|Yes| IntegrationPipeline[Integration Pipeline]\n    FrontendCoverage --\x3e|Yes| IntegrationPipeline\n    QualityGate --\x3e|Yes| IntegrationPipeline\n\n    IntegrationPipeline --\x3e DockerBuild[Build Containers]\n    DockerBuild --\x3e IntegrationTests[Integration Tests]\n    IntegrationTests --\x3e AllTestsPass{All Tests Pass?}\n    AllTestsPass --\x3e|No| BuildFails\n    AllTestsPass --\x3e|Yes| PushRegistry[Push to ACR]\n\n    %% Deployment\n    PushRegistry --\x3e DeployStaging[Deploy to Staging]\n    DeployStaging --\x3e SmokeTests[Smoke Tests]\n    SmokeTests --\x3e StagingReady[Staging Ready]\n\n    %% Production Release (release.yaml)\n    StagingReady --\x3e ManualApproval{Manual Approval}\n    ManualApproval --\x3e|Approved| DeployProd[Deploy to Production]\n    ManualApproval --\x3e|Rejected| FixIssues\n\n    %% Monitoring\n    DeployProd --\x3e Monitor[Production Monitoring]\n    Monitor --\x3e Alerts[Alerts & Rollback]\n\n    %% Styling\n    classDef process fill:#4A90E2,stroke:#2E5C8A,stroke-width:2px,color:#fff\n    classDef decision fill:#F39C12,stroke:#D68910,stroke-width:2px,color:#fff\n    classDef storage fill:#27AE60,stroke:#1E8449,stroke-width:2px,color:#fff\n    classDef fail fill:#E74C3C,stroke:#C0392B,stroke-width:2px,color:#fff\n    classDef success fill:#2ECC71,stroke:#27AE60,stroke-width:2px,color:#fff\n    classDef gate fill:#9B59B6,stroke:#8E44AD,stroke-width:3px,color:#fff\n\n    class Dev,LocalDev,LocalCommit,GitHubActions,CIPipeline,IntegrationPipeline process\n    class PreCommit,CommitReady,BranchProtection,ParallelChecks,BackendCoverage,FrontendCoverage,QualityGate,AllTestsPass,ManualApproval decision\n    class RemoteRepo,PushRegistry storage\n    class BuildFails fail\n    class DeployProd,Monitor,StagingReady success\n    class PreCommit,CIPipeline gate"}),"\n",(0,s.jsx)(n.h2,{id:"two-gate-architecture",children:"Two-Gate Architecture"}),"\n",(0,s.jsx)(n.p,{children:"The pipeline implements a clean two-gate system for maximum transparency and efficiency:"}),"\n",(0,s.jsx)(n.h3,{id:"gate-1-pre-commit-hooks-fast-local",children:"Gate 1: Pre-commit Hooks (Fast, Local)"}),"\n",(0,s.jsx)(n.p,{children:"Minimal checks that run in under 5 seconds:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Python"}),": Ruff formatting only"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"General"}),": JSON/YAML syntax, merge conflicts, large files"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Catch obvious issues before commit"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"gate-2-github-actions-comprehensive-container-based",children:"Gate 2: GitHub Actions (Comprehensive, Container-based)"}),"\n",(0,s.jsx)(n.p,{children:"Three streamlined workflows handle all CI/CD needs:"}),"\n",(0,s.jsxs)(n.h4,{id:"1-ciyaml---continuous-integration",children:["1. ",(0,s.jsx)(n.code,{children:"ci.yaml"})," - Continuous Integration"]}),"\n",(0,s.jsx)(n.p,{children:"Runs on every push and PR:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parallel Execution"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Backend: Ruff linting + MyPy type checking + Unit tests"}),"\n",(0,s.jsx)(n.li,{children:"Frontend: Ultracite linting + TypeScript checking + Unit tests"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Coverage Requirements"}),": 90% for both backend and frontend"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fast Feedback"}),": Results in under 10 minutes"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"2-integration-deployyaml---integration--deployment",children:["2. ",(0,s.jsx)(n.code,{children:"integration-deploy.yaml"})," - Integration & Deployment"]}),"\n",(0,s.jsx)(n.p,{children:"Runs on main/staging branches:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker Builds"}),": Optimized multi-stage builds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Integration Tests"}),": Full stack with PostgreSQL and Redis"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Azure Deployment"}),": Automatic to staging environment"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Smoke Tests"}),": Verify deployment health"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"3-releaseyaml---production-release",children:["3. ",(0,s.jsx)(n.code,{children:"release.yaml"})," - Production Release"]}),"\n",(0,s.jsx)(n.p,{children:"Triggered by version tags:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Manual Approval"}),": Required gate before production"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Blue-Green Deployment"}),": Zero-downtime releases"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rollback Ready"}),": Automatic on failure"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"branch-strategy",children:"Branch Strategy"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Feature branches"}),": Developer work (PRs to main)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Main branch"}),": Always deployable (auto-deploys to staging)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version tags"}),": Production releases (e.g., v1.2.3)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"key-improvements",children:"Key Improvements"}),"\n",(0,s.jsx)(n.h3,{id:"simplified-configuration",children:"Simplified Configuration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Pre-commit: Only essential checks (no type checking)"}),"\n",(0,s.jsx)(n.li,{children:"Workflows: Reduced from 6 to 3 files"}),"\n",(0,s.jsx)(n.li,{children:"Clear separation of concerns"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"performance-optimizations",children:"Performance Optimizations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Parallel job execution"}),"\n",(0,s.jsx)(n.li,{children:"Docker layer caching"}),"\n",(0,s.jsx)(n.li,{children:"Dependency caching"}),"\n",(0,s.jsx)(n.li,{children:"Test result caching"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"developer-experience",children:"Developer Experience"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fast local feedback (< 5 seconds)"}),"\n",(0,s.jsx)(n.li,{children:"Clear error messages"}),"\n",(0,s.jsx)(n.li,{children:"Predictable pipeline behavior"}),"\n",(0,s.jsx)(n.li,{children:"No redundant checks"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quality-gates",children:"Quality Gates"}),"\n",(0,s.jsx)(n.p,{children:"The two-gate system enforces quality at each stage:"}),"\n",(0,s.jsx)(n.h3,{id:"gate-1-pre-commit",children:"Gate 1 (Pre-commit)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Format Check"}),": Python code properly formatted"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Syntax Validation"}),": No invalid JSON/YAML"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"File Safety"}),": No large files or merge conflicts"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"gate-2-github-actions",children:"Gate 2 (GitHub Actions)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Code Quality"}),": Linting and type checking pass"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test Coverage"}),": Minimum 90% coverage enforced"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Integration Tests"}),": Full stack verification"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Build Success"}),": Docker images build correctly"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Deployment Health"}),": Staging smoke tests pass"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"tools--technologies",children:"Tools & Technologies"}),"\n",(0,s.jsx)(n.h3,{id:"version-control--cicd",children:"Version Control & CI/CD"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Git & GitHub"}),": Source control with branch protection"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GitHub Actions"}),": Three workflow files for all CI/CD"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Azure Container Registry"}),": Production image storage"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"quality-tools",children:"Quality Tools"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Backend"}),": Ruff (formatting/linting), MyPy (type checking), PyTest (testing)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Frontend"}),": Ultracite (formatting/linting), TypeScript (type checking), Vitest (testing)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pre-commit"}),": Minimal hooks for fast local checks"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"infrastructure",children:"Infrastructure"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker"}),": Multi-stage builds for efficient images"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Azure App Service"}),": Staging and production hosting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PostgreSQL & Redis"}),": Database and caching services"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Azure Application Insights"}),": Production monitoring"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsx)(n.p,{children:"The pipeline manages environment-specific configurations:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Development"}),": Local ",(0,s.jsx)(n.code,{children:".env.local"})," files"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CI/CD"}),": GitHub Secrets"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Staging/Production"}),": Azure App Service settings"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Secrets never committed to repository"}),"\n",(0,s.jsx)(n.li,{children:"Environment variables injected at build/runtime"}),"\n",(0,s.jsx)(n.li,{children:"Container images scanned for vulnerabilities"}),"\n",(0,s.jsx)(n.li,{children:"SAST/DAST tools in pipeline"}),"\n",(0,s.jsx)(n.li,{children:"Least-privilege access for deployments"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"workflow-files",children:"Workflow Files"}),"\n",(0,s.jsx)(n.h3,{id:"ciyaml",children:(0,s.jsx)(n.code,{children:"ci.yaml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"on:\n  push:\n    branches: ['**']\n  pull_request:\n    branches: ['**']\n\njobs:\n  backend-checks:    # Ruff, MyPy, PyTest\n  frontend-checks:   # Biome, TSC, Vitest\n  report-coverage:   # Upload to Codecov\n"})}),"\n",(0,s.jsx)(n.h3,{id:"integration-deployyaml",children:(0,s.jsx)(n.code,{children:"integration-deploy.yaml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'on:\n  push:\n    branches: [main, staging]\n  workflow_run:\n    workflows: ["CI Pipeline"]\n    types: [completed]\n\njobs:\n  build-images:      # Docker build & push\n  integration-tests: # Full stack tests\n  deploy-staging:    # Azure deployment\n  smoke-tests:       # Health checks\n'})}),"\n",(0,s.jsx)(n.h3,{id:"releaseyaml",children:(0,s.jsx)(n.code,{children:"release.yaml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"on:\n  push:\n    tags: ['v*.*.*']\n\njobs:\n  create-release:    # GitHub release\n  deploy-approval:   # Manual gate\n  deploy-production: # Azure production\n  verify-deployment: # Production checks\n"})}),"\n",(0,s.jsx)(n.h2,{id:"rollback-strategy",children:"Rollback Strategy"}),"\n",(0,s.jsx)(n.p,{children:"In case of issues:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic"}),": Health checks trigger auto-rollback"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Manual"}),": Previous versions available in registry"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Database"}),": Migration rollback scripts maintained"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Feature Flags"}),": Gradual rollout capabilities"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4409:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var l=i(758);const s={},t=l.createContext(s);function r(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);
