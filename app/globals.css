@import "tailwindcss";
@import "nextra-theme-docs/style.css";

@custom-variant dark (&:is(.dark *));

@utility container {
	margin-inline: auto;
	padding-inline: 2rem;
	@media (width >= --theme(--breakpoint-sm)) {
		max-width: none;
	}
	@media (width >= 1400px) {
		max-width: 1400px;
	}
}

@theme {
	--font-sans:
		var(--font-sans), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
		"Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

	--background-image-grid-paper: url("data:image/svg+xml,%3Csvg width=%2752%27 height=%2726%27 viewBox=%270 0 52 26%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cg fill=%27%23000000%27 fill-opacity=%270.08%27%3E%3Cpath d=%27M10 10c0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6h2c0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4v2c-3.314 0-6-2.686-6-6 0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6zm25.464-1.95l8.486 8.486-1.414 1.414-8.486-8.486 1.414-1.414z%27 /%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
	--background-image-grid-paper-dark: url("data:image/svg+xml,%3Csvg width=%2752%27 height=%2726%27 viewBox=%270 0 52 26%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cg fill=%27%23ffffff%27 fill-opacity=%270.08%27%3E%3Cpath d=%27M10 10c0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6h2c0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4v2c-3.314 0-6-2.686-6-6 0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6zm25.464-1.95l8.486 8.486-1.414 1.414-8.486-8.486 1.414-1.414z%27 /%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

	--color-border: hsl(var(--border));
	--color-input: hsl(var(--input));
	--color-ring: hsl(var(--ring));
	--color-background: hsl(var(--background));
	--color-foreground: hsl(var(--foreground));

	--color-primary: hsl(var(--primary));
	--color-primary-foreground: hsl(var(--primary-foreground));

	--color-secondary: hsl(var(--secondary));
	--color-secondary-foreground: hsl(var(--secondary-foreground));

	--color-destructive: hsl(var(--destructive));
	--color-destructive-foreground: hsl(var(--destructive-foreground));

	--color-muted: hsl(var(--muted));
	--color-muted-foreground: hsl(var(--muted-foreground));

	--color-accent: hsl(var(--accent));
	--color-accent-foreground: hsl(var(--accent-foreground));

	--color-popover: hsl(var(--popover));
	--color-popover-foreground: hsl(var(--popover-foreground));

	--color-card: hsl(var(--card));
	--color-card-foreground: hsl(var(--card-foreground));

	--radius-lg: var(--radius);
	--radius-md: calc(var(--radius) - 2px);
	--radius-sm: calc(var(--radius) - 4px);

	--animate-accordion-down: accordion-down 0.2s ease-out;
	--animate-accordion-up: accordion-up 0.2s ease-out;

	@keyframes accordion-down {
		from {
			height: 0;
		}
		to {
			height: var(--radix-accordion-content-height);
		}
	}
	@keyframes accordion-up {
		from {
			height: var(--radix-accordion-content-height);
		}
		to {
			height: 0;
		}
	}
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
	*,
	::after,
	::before,
	::backdrop,
	::file-selector-button {
		border-color: var(--color-gray-200, currentcolor);
	}
}

@layer base {
	:root {
		--background: 0 0% 100%;
		--foreground: 222.2 84% 4.9%;

		--card: 0 0% 100%;
		--card-foreground: 222.2 84% 4.9%;

		--popover: 0 0% 100%;
		--popover-foreground: 222.2 84% 4.9%;

		--primary: 222.2 47.4% 11.2%;
		--primary-foreground: 210 40% 98%;

		--secondary: 210 40% 96.1%;
		--secondary-foreground: 222.2 47.4% 11.2%;

		--muted: 210 40% 96.1%;
		--muted-foreground: 215.4 16.3% 46.9%;

		--accent: 210 40% 96.1%;
		--accent-foreground: 222.2 47.4% 11.2%;

		--destructive: 0 84.2% 60.2%;
		--destructive-foreground: 210 40% 98%;

		--border: 214.3 31.8% 91.4%;
		--input: 214.3 31.8% 91.4%;
		--ring: 222.2 84% 4.9%;

		--radius: 0.5rem;
	}

	.dark {
		--background: 222.2 84% 4.9%;
		--foreground: 210 40% 98%;

		--card: 222.2 84% 4.9%;
		--card-foreground: 210 40% 98%;

		--popover: 222.2 84% 4.9%;
		--popover-foreground: 210 40% 98%;

		--primary: 210 40% 98%;
		--primary-foreground: 222.2 47.4% 11.2%;

		--secondary: 217.2 32.6% 17.5%;
		--secondary-foreground: 210 40% 98%;

		--muted: 217.2 32.6% 17.5%;
		--muted-foreground: 215 20.2% 65.1%;

		--accent: 217.2 32.6% 17.5%;
		--accent-foreground: 210 40% 98%;

		--destructive: 0 62.8% 30.6%;
		--destructive-foreground: 210 40% 98%;

		--border: 217.2 32.6% 17.5%;
		--input: 217.2 32.6% 17.5%;
		--ring: 212.7 26.8% 83.9%;
	}
}

@layer base {
	* {
		@apply border-border;
	}
	body {
		@apply bg-background text-foreground;
	}
}

/* Tiptap Editor Styles */
.ProseMirror {
	outline: none;
	color: hsl(var(--foreground));
	background-color: hsl(var(--background));
}

.ProseMirror p.is-editor-empty:first-child::before {
	color: hsl(var(--muted-foreground));
	content: attr(data-placeholder);
	float: left;
	height: 0;
	pointer-events: none;
}

.ProseMirror ul,
.ProseMirror ol {
	padding: 0 1rem;
}

.ProseMirror h1,
.ProseMirror h2,
.ProseMirror h3,
.ProseMirror h4,
.ProseMirror h5,
.ProseMirror h6 {
	line-height: 1.1;
	margin-top: 2.5rem;
	text-wrap: pretty;
	color: hsl(var(--foreground));
}

.ProseMirror h1,
.ProseMirror h2 {
	margin-top: 3.5rem;
	margin-bottom: 1.5rem;
}

.ProseMirror h1 {
	font-size: 1.4rem;
	font-weight: 600;
}

.ProseMirror h2 {
	font-size: 1.2rem;
	font-weight: 600;
}

.ProseMirror h3 {
	font-size: 1.1rem;
	font-weight: 600;
}

.ProseMirror blockquote {
	border-left: 3px solid hsl(var(--border));
	margin: 1.5rem 0;
	padding-left: 1rem;
	color: hsl(var(--muted-foreground));
	font-style: italic;
}

.ProseMirror strong {
	color: hsl(var(--foreground));
	font-weight: 600;
}

.ProseMirror em {
	color: hsl(var(--foreground));
}

.ProseMirror code {
	background-color: hsl(var(--muted));
	color: hsl(var(--foreground));
	padding: 0.2rem 0.4rem;
	border-radius: 0.25rem;
	font-size: 0.875rem;
}

.ProseMirror pre {
	background-color: hsl(var(--muted));
	color: hsl(var(--foreground));
	padding: 1rem;
	border-radius: 0.5rem;
	overflow-x: auto;
}

.ProseMirror pre code {
	background: none;
	padding: 0;
}

/* Ensure lists have proper spacing and colors */
.ProseMirror ul li,
.ProseMirror ol li {
	color: hsl(var(--foreground));
	margin: 0.25rem 0;
}

/* Selection styles */
.ProseMirror ::selection {
	background-color: hsl(var(--accent));
	color: hsl(var(--accent-foreground));
}

/* ========================================================================
   React Flow Custom Styles (Curriculum Documentation)
   ======================================================================== */

/* ========================================================================
   Light Mode - React Flow Variables
   ======================================================================== */
:root {
	--rf-background: #f5f5f5;
	--rf-background-pattern: rgba(0, 0, 0, 0.1);
	--rf-node-bg: rgba(255, 255, 255, 0.95);
	--rf-node-bg-hover: rgba(255, 255, 255, 1);
	--rf-node-border: rgba(0, 0, 0, 0.15);
	--rf-node-border-hover: rgba(0, 0, 0, 0.25);
	--rf-text: #1a1a1a;
	--rf-text-secondary: rgba(0, 0, 0, 0.7);
	--rf-text-tertiary: rgba(0, 0, 0, 0.5);
	--rf-edge-stroke: rgba(0, 0, 0, 0.3);
	--rf-edge-stroke-selected: rgba(59, 130, 246, 0.9);
	--rf-edge-stroke-animated: rgba(139, 92, 246, 0.7);
	--rf-controls-bg: rgba(255, 255, 255, 0.8);
	--rf-controls-border: rgba(0, 0, 0, 0.1);
	--rf-controls-text: rgba(0, 0, 0, 0.7);
	--rf-controls-text-hover: rgba(0, 0, 0, 0.95);
	--rf-controls-bg-hover: rgba(0, 0, 0, 0.05);
	--rf-minimap-bg: rgba(255, 255, 255, 0.8);
	--rf-minimap-border: rgba(0, 0, 0, 0.1);
	--rf-glassmorphism-bg: rgba(255, 255, 255, 0.8);
	--rf-glassmorphism-bg-hover: rgba(255, 255, 255, 0.9);
	--rf-glassmorphism-border: rgba(0, 0, 0, 0.1);
	--rf-shadow-color: rgba(0, 0, 0, 0.1);
}

/* ========================================================================
   Dark Mode - React Flow Variables
   ======================================================================== */
.dark {
	--rf-background: #0a0a0a;
	--rf-background-pattern: rgba(255, 255, 255, 0.05);
	--rf-node-bg: rgba(0, 0, 0, 0.8);
	--rf-node-bg-hover: rgba(0, 0, 0, 0.9);
	--rf-node-border: rgba(255, 255, 255, 0.1);
	--rf-node-border-hover: rgba(255, 255, 255, 0.2);
	--rf-text: #ffffff;
	--rf-text-secondary: rgba(255, 255, 255, 0.8);
	--rf-text-tertiary: rgba(255, 255, 255, 0.6);
	--rf-edge-stroke: rgba(255, 255, 255, 0.3);
	--rf-edge-stroke-selected: rgba(59, 130, 246, 0.8);
	--rf-edge-stroke-animated: rgba(139, 92, 246, 0.6);
	--rf-controls-bg: rgba(0, 0, 0, 0.6);
	--rf-controls-border: rgba(255, 255, 255, 0.1);
	--rf-controls-text: rgba(255, 255, 255, 0.6);
	--rf-controls-text-hover: rgba(255, 255, 255, 0.95);
	--rf-controls-bg-hover: rgba(255, 255, 255, 0.05);
	--rf-minimap-bg: rgba(0, 0, 0, 0.6);
	--rf-minimap-border: rgba(255, 255, 255, 0.1);
	--rf-glassmorphism-bg: rgba(0, 0, 0, 0.6);
	--rf-glassmorphism-bg-hover: rgba(0, 0, 0, 0.75);
	--rf-glassmorphism-border: rgba(255, 255, 255, 0.1);
	--rf-shadow-color: rgba(0, 0, 0, 0.3);
}

/* ========================================================================
   React Flow Canvas - Theme-aware
   ======================================================================== */
.react-flow {
	background-color: var(--rf-background);
	transition: background-color 0.3s ease;
}

.react-flow__background {
	background-color: var(--rf-background);
}

.react-flow__background-pattern {
	stroke: var(--rf-background-pattern);
}

/* ========================================================================
   Edge Styling - Theme-aware
   ======================================================================== */
.react-flow__edge-path {
	stroke: var(--rf-edge-stroke);
	stroke-width: 2;
	transition: stroke 0.3s ease;
}

/* Edge selection styling disabled - edges are not selectable in the viewer */

.react-flow__edge.animated .react-flow__edge-path {
	stroke: var(--rf-edge-stroke-animated);
	stroke-dasharray: 5;
	animation: dashdraw 0.5s linear infinite;
}

@keyframes dashdraw {
	to {
		stroke-dashoffset: -10;
	}
}

/* ========================================================================
   Controls - Theme-aware Glassmorphism
   ======================================================================== */
.react-flow__controls {
	background: var(--rf-controls-bg);
	backdrop-filter: blur(40px);
	-webkit-backdrop-filter: blur(40px);
	border: 1px solid var(--rf-controls-border);
	border-radius: 0.75rem;
	transition:
		background 0.3s ease,
		border-color 0.3s ease;
}

.react-flow__controls-button {
	background: transparent;
	color: var(--rf-controls-text);
	border: none;
	border-bottom: 1px solid var(--rf-controls-border);
	transition:
		background 0.2s ease,
		color 0.2s ease;
}

.react-flow__controls-button:hover {
	background: var(--rf-controls-bg-hover);
	color: var(--rf-controls-text-hover);
}

/* ========================================================================
   MiniMap - Theme-aware Glassmorphism
   ======================================================================== */
.react-flow__minimap {
	background: var(--rf-minimap-bg);
	backdrop-filter: blur(40px);
	-webkit-backdrop-filter: blur(40px);
	border: 1px solid var(--rf-minimap-border);
	border-radius: 0.75rem;
	transition:
		background 0.3s ease,
		border-color 0.3s ease;
}

/* ========================================================================
   Glassmorphism Utilities - Theme-aware
   ======================================================================== */
.glassmorphism {
	background: var(--rf-glassmorphism-bg);
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
	border: 1px solid var(--rf-glassmorphism-border);
	transition:
		background 0.3s ease,
		border-color 0.3s ease;
}

.glassmorphism:hover {
	background: var(--rf-glassmorphism-bg-hover);
}

/* Support for browsers without backdrop-filter */
@supports not (backdrop-filter: blur(40px)) {
	.f-effect-backdrop-blur-lg {
		background: rgba(255, 255, 255, 0.9);
	}

	.glassmorphism {
		background: rgba(255, 255, 255, 0.85);
	}

	.dark .f-effect-backdrop-blur-lg {
		background: rgba(0, 0, 0, 0.8);
	}

	.dark .glassmorphism {
		background: rgba(0, 0, 0, 0.7);
	}
}

/* ========================================================================
   Animation Utilities
   ======================================================================== */
.spring-medium {
	transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
	.spring-medium,
	.react-flow__edge.animated .react-flow__edge-path {
		animation: none;
		transition: none;
	}
}

/* ========================================================================
   Scroll Highlight Animation (Progress Tracker Navigation)
   ======================================================================== */
.scroll-highlight {
	animation: scroll-highlight-pulse 2s ease-out;
}

@keyframes scroll-highlight-pulse {
	0% {
		box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.5);
		background-color: rgba(59, 130, 246, 0.1);
	}
	50% {
		box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
		background-color: rgba(59, 130, 246, 0.05);
	}
	100% {
		box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
		background-color: transparent;
	}
}

.dark .scroll-highlight {
	animation: scroll-highlight-pulse-dark 2s ease-out;
}

@keyframes scroll-highlight-pulse-dark {
	0% {
		box-shadow: 0 0 0 0 rgba(96, 165, 250, 0.5);
		background-color: rgba(96, 165, 250, 0.15);
	}
	50% {
		box-shadow: 0 0 0 8px rgba(96, 165, 250, 0);
		background-color: rgba(96, 165, 250, 0.08);
	}
	100% {
		box-shadow: 0 0 0 0 rgba(96, 165, 250, 0);
		background-color: transparent;
	}
}
