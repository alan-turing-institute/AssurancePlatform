FROM python:3.12-slim

# Set Python environment variables for containerized applications
ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1

# Install uv
RUN pip install uv

COPY . /app
WORKDIR /app

# Install dependencies with uv from pyproject.toml (including dev dependencies)
# Create venv and install all extras
RUN uv venv && \
    uv pip install -e ".[dev]"

# Make entrypoint script executable
RUN chmod +x /app/docker-entrypoint-dev.sh

# Use the development entrypoint script
ENTRYPOINT ["/app/docker-entrypoint-dev.sh"]
