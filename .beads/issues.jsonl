{"id":"AssurancePlatform-0m0","title":"Support multiple Evidence URLs per element","description":"Allow users to add multiple URLs to evidence elements instead of just one.\n\nGitHub Issue: #427\n\nUser Story:\nAs an AI practitioner, I want to upload \u003e1 pieces of evidence (e.g., URLs) to particular evidence elements so that I can keep track of more complex pieces of evidence.\n\nRequirements:\n- Add multiple URLs to an evidence element\n- View all URLs associated with an evidence element\n- Remove individual URLs without affecting others\n- Input validation for URL format\n- XSS protection for stored/displayed URLs\n\nTechnical Notes:\n- Database schema change: array of URLs or related table\n- Dynamic form component for adding URL fields\n- API modifications for CRUD on multiple URLs\n\nAcceptance Criteria:\n- [ ] Users can add multiple URLs to evidence elements\n- [ ] All URLs are visible and accessible when viewing element\n- [ ] Individual URLs can be removed\n- [ ] URLs are validated before submission\n- [ ] Accessible UI for managing URLs","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-07T13:43:26.829014Z","created_by":"cburr","updated_at":"2026-01-09T09:49:17.965107Z","labels":["data-model","feature"]}
{"id":"AssurancePlatform-27s","title":"Phase 2b': Curriculum Module System","description":"Develop modular, reusable components for TEA curriculum modules.\n\nTasks:\n- [x] Case Viewer redesign with ELK layout engine\n- [x] Progress Tracker MVP with manual checkpoints\n\nKey Decisions:\n- JSON Format: Prisma-aligned flat format\n- Layout Engine: ELK only (replacing Dagre)\n- Progress Storage: localStorage for anonymous, DB for authenticated (DB deferred)\n- Node Components: Unified AssuranceNode with configuration-driven styling\n\nDeferred:\n- Database persistence for authenticated users\n- Sync queue for offline support\n- Full learning record storage","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-07T12:58:04.248635Z","created_by":"cburr","updated_at":"2026-01-07T13:00:18.660556Z","labels":["documentation"],"deleted_at":"2026-01-07T13:00:18.660556Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"AssurancePlatform-2lo","title":"Docs route extremely slow compilation in dev (34+ seconds)","description":"The docs route `/docs/[[...slug]]` takes 34+ seconds to compile on first load in dev, compiling 14,085 modules. This makes the dev experience extremely poor - any browser refresh triggers a full recompile.\n\n**Current behaviour:**\n- First request to any /docs page: 34-40+ seconds\n- Compiles 14,085 modules for the catch-all route\n- Server appears unresponsive during compilation\n- Even with `ignored: ['**/content/**']` in webpack watchOptions\n\n**Expected behaviour:**\n- Fast incremental compilation\n- MDX file changes should hot-reload quickly\n\n**Investigation notes:**\n- next.config.mjs already has `ignored: ['**/content/**']` for watchOptions\n- Nextra 4.6.1 with Next.js 15.5.7\n- The catch-all route `[[...slug]]` may be importing all content on every compile\n- generateStaticParams doesn't help in dev mode\n\n**Potential solutions to investigate:**\n1. Check if Nextra has dev-specific optimisation options\n2. Consider lazy loading/code splitting for docs\n3. Check if turbopack improves this (--turbo flag)\n4. Investigate if content can be pre-compiled separately\n5. Check Nextra GitHub issues for similar reports","status":"blocked","priority":1,"issue_type":"bug","created_at":"2026-01-08T13:50:27.125566Z","created_by":"cburr","updated_at":"2026-01-09T09:31:00.032497Z","comments":[{"id":1,"issue_id":"AssurancePlatform-2lo","author":"cburr","text":"Found known Nextra issue: https://github.com/shuding/nextra/issues/3675 - This is a known Nextra 4 problem (60+ sec renders, 1.8-2GB RAM). Turbopack doesn't help. The catch-all route design causes this. No clear upstream fix yet. Potential workarounds: run docs separately, use Nextra 3, or wait for fix.","created_at":"2026-01-08T13:59:58Z"}]}
{"id":"AssurancePlatform-4eq","title":"Test issue for deletion","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-09T09:43:10.498615Z","created_by":"cburr","updated_at":"2026-01-09T09:43:10.498615Z"}
{"id":"AssurancePlatform-59h","title":"My first issue","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:21:42.184897Z","updated_at":"2025-12-24T10:23:10.736974Z","closed_at":"2025-12-24T10:23:10.736974Z","close_reason":"Just testing"}
{"id":"AssurancePlatform-5fm","title":"Phase 2d: Auth Cleanup (RefreshToken Removal)","description":"Final cleanup of the legacy RefreshToken authentication system. BLOCKED until 2025-01-19 (30 days after JWT-only deployment).\n\nPre-requisite: JWT-only auth (USE_JWT_ONLY_AUTH=true) must be stable in production for 30+ days.\n\nCode Cleanup:\n- [ ] Delete lib/auth/refresh-token-service.ts\n- [ ] Delete lib/auth/validate-session.ts\n- [ ] Delete lib/auth/feature-flags.ts\n- [ ] Update lib/auth-options.ts - Remove legacy RefreshToken code\n- [ ] Update middleware.ts - Remove stale session detection\n- [ ] Update types/next-auth.d.ts - Remove key from Session type\n- [ ] Remove USE_JWT_ONLY_AUTH from environment variables\n\nClient Component Cleanup (remove session?.key references):\n- [ ] components/common/node-edit.tsx\n- [ ] components/common/new-link-form.tsx\n- [ ] components/common/edit-form.tsx\n- [ ] components/common/create-form.tsx\n- [ ] components/cases/orphan-elements.tsx\n\nTest Updates:\n- [ ] app/(landing)/_components/__tests__/header.test.tsx\n- [ ] lib/__tests__/auth-helpers.test.ts\n\nDatabase Migration:\n- [ ] Create Prisma migration to drop RefreshToken table\n- [ ] Run on staging first\n- [ ] Run on production","status":"blocked","priority":2,"issue_type":"task","created_at":"2026-01-07T12:58:17.791742Z","created_by":"cburr","updated_at":"2026-01-07T13:00:49.171353Z","labels":["auth","tech-debt"],"dependencies":[{"issue_id":"AssurancePlatform-5fm","depends_on_id":"AssurancePlatform-dpk","type":"parent-child","created_at":"2026-01-09T09:38:44.305533Z","created_by":"cburr"}]}
{"id":"AssurancePlatform-5o1","title":"Code Quality: Replace raw SQL pattern in health check","description":"The health check in app/api/health/route.ts (line 34) uses $queryRaw with a hardcoded query.\n\n**Current code:**\n```typescript\nawait prisma.$queryRaw`SELECT 1`;\n```\n\n**Issue:** While this specific usage is safe (hardcoded query with no user input), using $queryRaw sets a pattern that could be dangerous if copied elsewhere.\n\n**Fix:** Replace with a safer alternative:\n```typescript\nawait prisma.user.count({ take: 1 }); // Prisma ORM method\n```\n\n**Confidence:** 80%","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-24T10:27:30.403578Z","updated_at":"2026-01-02T10:57:51.766249Z","closed_at":"2026-01-02T10:57:51.766249Z","close_reason":"Replaced $queryRaw with prisma.user.count({ take: 1 }) and added unit tests","labels":["code-quality"]}
{"id":"AssurancePlatform-7ce","title":"Security: Fix misleading sanitizeDescription function (XSS risk)","description":"The sanitizeDescription function in lib/sanitize-html.ts (lines 5-8) only removes a single pattern (\u003cp\u003e\u003cbr\u003e\u003c/p\u003e) and doesn't actually sanitize HTML.\n\n**Issue:** The function is named 'sanitize' but provides no actual sanitization, leaving XSS vulnerabilities if used with that expectation.\n\n**Example attack:**\n```javascript\nconst malicious = '\u003cimg src=x onerror=\"alert(document.cookie)\"\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e';\nsanitizeDescription(malicious); \n// Returns: '\u003cimg src=x onerror=\"alert(document.cookie)\"\u003e'\n// XSS still present!\n```\n\n**Fix:** Either use a proper HTML sanitization library (DOMPurify or sanitize-html) or rename to removeEmptyParagraphs() to avoid confusion.\n\n**Confidence:** 95%","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-24T10:27:15.692483Z","updated_at":"2026-01-02T12:07:06.402194Z","closed_at":"2026-01-02T12:07:06.402194Z","close_reason":"Added DOMPurify sanitisation to strip XSS vectors","labels":["security","xss"]}
{"id":"AssurancePlatform-aip","title":"Test deletion confirmation","status":"tombstone","priority":4,"issue_type":"task","created_at":"2026-01-09T09:45:44.387603Z","created_by":"cburr","updated_at":"2026-01-09T09:46:01.870294Z","deleted_at":"2026-01-09T09:46:01.870294Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"AssurancePlatform-at5","title":"Plan migration to rename legacy table names (api_*)","description":"Legacy table names from Django migration remain in the Prisma schema (e.g., api_casestudy, legacy_mappings).\n\nPlan and execute a migration to use cleaner table names.\n\nConsiderations:\n- Foreign key dependencies\n- Downtime requirements\n- Rollback strategy\n\nDeferred from Phase 2c.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T13:00:38.167572Z","created_by":"cburr","updated_at":"2026-01-07T13:00:38.167572Z","labels":["tech-debt"],"dependencies":[{"issue_id":"AssurancePlatform-at5","depends_on_id":"AssurancePlatform-jdr","type":"blocks","created_at":"2026-01-09T09:37:13.728345Z","created_by":"cburr"},{"issue_id":"AssurancePlatform-at5","depends_on_id":"AssurancePlatform-dpk","type":"parent-child","created_at":"2026-01-09T09:38:48.835619Z","created_by":"cburr"}]}
{"id":"AssurancePlatform-bdi","title":"Implement Published Cases feature","description":"The Published Cases functionality currently returns empty arrays marked 'Not yet implemented'.\n\nLocation: Various files returning published cases data\n\nThis feature should allow users to publish their assurance cases for public viewing.\n\nDeferred from Phase 2c.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T13:00:37.881351Z","created_by":"cburr","updated_at":"2026-01-08T10:55:18.068558Z","closed_at":"2026-01-08T10:55:18.068558Z","close_reason":"Feature implemented and tested","labels":["feature"]}
{"id":"AssurancePlatform-bp8","title":"Audit environment variables on Azure app services","description":"Audit all environment variables on both production and staging Azure App Services.\n\nGoals:\n- Document all required env vars\n- Remove obsolete variables\n- Ensure consistency between environments\n- Update .env.example\n\nDeferred from Phase 2c.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T13:00:38.796593Z","created_by":"cburr","updated_at":"2026-01-07T13:00:38.796593Z","labels":["devops"],"dependencies":[{"issue_id":"AssurancePlatform-bp8","depends_on_id":"AssurancePlatform-dpk","type":"parent-child","created_at":"2026-01-09T09:38:47.607619Z","created_by":"cburr"}]}
{"id":"AssurancePlatform-c0l","title":"Phase 2c: Technical Cleanup","description":"Housekeeping tasks to consolidate dependencies, remove legacy code, and address technical debt.\n\nCompleted Tasks:\n- [x] Consolidate notifications: Remove react-toastify in favour of sonner\n- [x] Replace moment.js with date-fns\n- [x] Centralise public route definitions (lib/routes.ts)\n- [x] Delete eap-backend App Service (old Django backend)\n- [x] Delete frontend-test-resource (unused Azure Load Testing)\n- [x] Implement JWT-only auth with USE_JWT_ONLY_AUTH feature flag\n\nDeferred Tasks:\n- [ ] Implement Published Cases (returns empty arrays)\n- [ ] Plan migration to rename legacy table names (api_*)\n- [ ] Ensure all Server Actions use Zod validation\n- [ ] Audit all env vars on both app services\n- [ ] Rename staging database from postgres to eap\n\nLint Exclusions to Address:\n- components/ui/** (shadcn/ui patterns)\n- types/*.d.ts\n- app/api/cases/*/permissions/**\n- Various files with suppression comments","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-07T12:58:17.49846Z","created_by":"cburr","updated_at":"2026-01-07T13:00:21.430949Z","labels":["tech-debt"],"deleted_at":"2026-01-07T13:00:21.430949Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"AssurancePlatform-ceo","title":"Security: Address timing attack vulnerability in JWT callback","description":"The JWT callback in lib/auth-options.ts (lines 302-305) checks token expiry and clears expired tokens in a way that creates timing side-channel.\n\n**Issue:** Valid tokens complete the full callback execution path while expired tokens modify the token object then return. This creates measurable timing differences that could be exploited for session enumeration.\n\n**Impact:** An attacker could use timing attacks to determine if a session token has expired without having valid credentials.\n\n**Fix:** Move the expiry validation to a separate middleware or route guard with constant-time checks.\n\n**Confidence:** 85%","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-24T10:27:23.037717Z","updated_at":"2026-01-08T09:41:52.508262Z","closed_at":"2026-01-08T09:41:52.508262Z","close_reason":"Fixed timing attack vulnerability by implementing constant-time validation utilities and refactoring auth code to eliminate timing side-channels","labels":["auth","security"]}
{"id":"AssurancePlatform-cep","title":"Rename staging database from 'postgres' to 'eap'","description":"The staging database is named 'postgres' while production uses 'eap'. Rename for consistency.\n\nCurrent:\n- Production: eap-database-v15 / eap\n- Staging: staging-eap-database / postgres\n\nTarget:\n- Staging: staging-eap-database / eap\n\nDeferred from Phase 2c.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T13:00:39.111345Z","created_by":"cburr","updated_at":"2026-01-07T13:00:39.111345Z","labels":["devops"],"dependencies":[{"issue_id":"AssurancePlatform-cep","depends_on_id":"AssurancePlatform-dpk","type":"parent-child","created_at":"2026-01-09T09:38:45.975476Z","created_by":"cburr"}]}
{"id":"AssurancePlatform-cta","title":"Ensure all Server Actions use Zod validation","description":"Audit all Server Actions in actions/ directory and ensure they use Zod schemas for input validation.\n\nThis improves type safety and provides better error messages for invalid input.\n\nDeferred from Phase 2c.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T13:00:38.478085Z","created_by":"cburr","updated_at":"2026-01-08T16:14:38.769967Z","closed_at":"2026-01-08T16:14:38.769967Z","close_reason":"Implemented Zod validation for all Server Actions. Created schemas in lib/schemas/, validation helpers in lib/validation/server-action.ts, and ActionResult type. Updated actions/assurance-cases.ts, actions/case-studies.ts, and actions/capture.ts with Zod validation. Updated all callers to handle ActionResult. Deleted low-value capture.test.ts. Remaining test failures are pre-existing issues unrelated to this change.","labels":["code-quality"]}
{"id":"AssurancePlatform-d8t","title":"Close 22 GitHub issues covered by TASKS directory","description":"Close the 22 GitHub issues that are already tracked in the TASKS directory phases.\n\n## Reference\nSee TASKS/GitHub-Issues-Migration.md for:\n- Full list of issues to close (22 total)\n- Suggested close messages for each issue\n- CLI commands for bulk closing\n\n## Issues to Close\n### Originally Covered (15)\n#713, #654, #488, #687, #498, #490, #465, #464, #463, #426, #425, #645, #460, #458, #432\n\n### Previously Partially Covered (7)\n#665, #492, #686, #684, #689, #485, #652","acceptance_criteria":"- [ ] All 22 issues closed with appropriate comments\n- [ ] Each close message references the relevant TASKS phase","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-02T17:09:15.01986Z","created_by":"cburr","updated_at":"2026-01-07T13:45:10.480636Z","closed_at":"2026-01-07T13:45:10.480636Z","close_reason":"22 GitHub issues closed manually and remaining 15 migrated to TASKS phases or beads"}
{"id":"AssurancePlatform-dpk","title":"Phase 2: Platform Stabilisation","description":"Epic for Phase 2 of the TEA Platform development roadmap. Focus: stabilising the deployed platform, improving developer experience, and cleaning up technical debt from the Django to Next.js migration.\n\nSub-phases:\n- 2a: DevOps \u0026 CI/CD\n- 2b: Documentation Migration  \n- 2b': Curriculum Module System\n- 2c: Technical Cleanup\n- 2d: Auth Cleanup\n\nExit Criteria:\n- CI/CD pipeline runs reliably without manual intervention\n- Documentation builds cleanly with Nextra\n- No duplicate dependencies in bundle\n- Legacy code removed or documented","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-07T12:57:48.508141Z","created_by":"cburr","updated_at":"2026-01-07T12:57:48.508141Z"}
{"id":"AssurancePlatform-i1h","title":"Fix broken links on Case Studies documentation page","description":"On the main Case Studies page (https://assuranceplatform.azurewebsites.net/docs/curriculum/hands-on/case-studies), the inline links to individual case studies are broken (404 errors).\n\n**Issue:**\n- Inline links point to: `/docs/curriculum/hands-on/diabetic-retinopathy-screening`\n- Correct path is: `/docs/curriculum/hands-on/case-studies/diabetic-retinopathy-screening`\n\nThe sidebar links work correctly, but the inline links in the main content are missing the `case-studies/` path segment.\n\n**Affected links:**\n- Diabetic Retinopathy Screening\n- Crop Damage Assessment\n- Flood Risk Assessment  \n- Student Learning Assessment\n\n**Fix:**\nUpdate the markdown links in the case-studies.mdx file to include the correct path.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-08T08:25:27.42476Z","created_by":"cburr","updated_at":"2026-01-08T13:08:36.785889Z","closed_at":"2026-01-08T13:08:36.785889Z","close_reason":"Fixed: Updated index page with enhanced layout including all 6 case studies with summary table. Created _meta.ts to hide individual case studies from sidebar - users now navigate via index page only."}
{"id":"AssurancePlatform-iqi","title":"Test delete confirmation","status":"tombstone","priority":4,"issue_type":"task","created_at":"2026-01-09T09:47:34.039315Z","created_by":"cburr","updated_at":"2026-01-09T09:47:41.032367Z","deleted_at":"2026-01-09T09:47:41.032367Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"AssurancePlatform-jdr","title":"Remove 39 legacy Django tables from database","description":"## Overview\n\nAfter migrating from Django to Next.js/Prisma, 39 orphaned database tables remain. These tables have NO corresponding Prisma model (no @@map directive) and are therefore not used by the application.\n\n## Verification Performed\n\n1. Compared CREATE TABLE statements in prod backup against @@map directives in schema.prisma\n2. Agent search confirmed no raw SQL queries reference these tables\n3. No foreign key constraints exist between orphaned and active tables\n\n## Tables to Remove (39 total)\n\n### Django Auth/Admin (12 tables)\naccount_emailaddress, account_emailconfirmation, auth_group, auth_group_permissions, auth_permission, authtoken_token, django_admin_log, django_content_type, django_migrations, django_session, django_site\n\n### Social Auth (8 tables)\nsocial_auth_association, social_auth_code, social_auth_nonce, social_auth_partial, social_auth_usersocialauth, socialaccount_socialaccount, socialaccount_socialapp, socialaccount_socialapp_sites, socialaccount_socialtoken\n\n### Migrated API Tables (18 tables)\napi_assurancecase, api_assurancecase_edit_groups, api_assurancecase_review_groups, api_assurancecase_view_groups, api_assurancecaseimage, api_comment, api_context, api_eapgroup, api_eapgroup_member, api_eapuser, api_eapuser_groups, api_eapuser_user_permissions, api_evidence, api_evidence_property_claim, api_githubrepository, api_propertyclaim, api_strategy, api_toplevelnormativegoal\n\n### Other (1 table)\nwebsockets_assurancecaseconnection\n\n## Implementation Plan\n\n### Phase 1: Local Testing Setup\n- Restore prod backup to local dev database\n- Verify app works correctly with current state\n- Document baseline test results\n\n### Phase 2: Create Migration\n- Create manual migration file in prisma/migrations/\n- Write removal statements for all 39 tables\n- Order correctly (check for inter-table dependencies)\n\n### Phase 3: Local Verification\n- Apply migration to local database\n- Run Prisma generate to verify client still works\n- Check for any console errors on app startup\n\n### Phase 4: User Flow Testing\n- Auth: Login (credentials), Login (GitHub), Registration, Logout\n- Password: Reset request, Reset completion\n- Cases: Create, Edit, Delete, View\n- Publishing: Publish case, Unpublish case\n- Case Studies: View list, View detail, Create, Link published cases\n- Teams: Create team, Invite member, Remove member\n- Permissions: Share case, Change permissions\n- GitHub: Connect repo, View repos\n\n### Phase 5: Automated Tests\n- Run full test suite\n- Run E2E tests if available\n- All tests pass\n\n### Phase 6: Staging Deployment\n- Create PR with migration\n- Deploy to staging\n- Run smoke tests\n- Monitor logs for 24h\n\n### Phase 7: Production Deployment\n- Merge to main after staging verification\n- Deploy to production\n- Monitor for errors\n\n## Future Cleanup (Separate Issues)\n- legacy_mappings table (Prisma-managed but unused)\n- refresh_tokens table (Pending Phase 2d)\n- Rename api_casestudy tables to cleaner names\n\n## Reference\n- Prod backup: backups/prod-backup-20260107-163812-current.sql\n- Phase 2c spec: TASKS/Phase2/2c-TechnicalCleanup/Spec.md\n","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-08T10:07:43.927331Z","created_by":"cburr","updated_at":"2026-01-08T10:07:43.927331Z","dependencies":[{"issue_id":"AssurancePlatform-jdr","depends_on_id":"AssurancePlatform-dpk","type":"parent-child","created_at":"2026-01-09T09:38:33.776548Z","created_by":"cburr"}]}
{"id":"AssurancePlatform-na6","title":"Reset password functionality","description":"Users need the ability to reset their password via email link.\n\nGitHub Issue: #642\n\nRequirements:\n- Set up SMTP and TURING 'from' email address (requires IT support)\n- 'Forgot password' link on login page\n- Email sent with password reset link\n- Token valid for 30-60 minutes\n\nStatus: BLOCKED - waiting on IT for SMTP configuration details.\n\nAcceptance Criteria:\n- [ ] SMTP configured with Turing email address\n- [ ] Forgot password link on login page\n- [ ] Password reset email sent successfully\n- [ ] Token expires after 30-60 minutes\n- [ ] User can set new password via reset link","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-07T13:43:26.52922Z","created_by":"cburr","updated_at":"2026-01-07T15:09:43.953045Z","closed_at":"2026-01-07T15:09:43.953045Z","close_reason":"Fixed via PR #736 - added missing Prisma migration for password_reset_attempts and security_audit_logs tables. Verified working in staging.","labels":["auth"]}
{"id":"AssurancePlatform-op3","title":"Restore detailed case study content lost in Docusaurus to Nextra migration","description":"During the migration from Docusaurus to Nextra, the detailed case study content was replaced with placeholder versions. The original detailed content exists in git history at commit 37fd3173862678368f6f4383d12f815eb7d0f0e3.\n\n**Current state (placeholders in `content/curriculum/hands-on/case-studies/`):**\n- ~70 lines each\n- Basic structure: Background, The System, Assurance Goals, Key Considerations, Discussion Questions\n\n**Original detailed content (in git history):**\n- ~200-300 lines each\n- Comprehensive structure including:\n  - Hero image with metadata table\n  - Detailed system description with 'How It Works' steps\n  - Key Technical Details table (model architecture, training data, etc.)\n  - Deployment Context\n  - Stakeholder table with interests and concerns\n  - Regulatory Context section\n  - Goal-specific considerations (Fairness/Explainability)\n  - Deliberative Prompts\n  - Suggested Strategies\n  - Recommended Techniques linking to TEA Techniques library\n\n**Files to restore:**\n1. `diabetic-retinopathy-screening.md` → Explainable Diabetic Retinopathy Screening System\n2. `crop-damage-assessment.md` → Fair Crop Damage Assessment System  \n3. `flood-risk-assessment.md` → Equitable Flood Risk Assessment System\n4. `student-learning-assessment.md` → Explainable Student Learning Assessment System\n\n**Git command to retrieve original content:**\n```bash\ngit show 37fd3173862678368f6f4383d12f815eb7d0f0e3:tea-docs/docs/docs/curriculum/case-studies/\u003cfilename\u003e.md\n```\n\n**Note:** The content will need to be converted from Docusaurus MD format to Nextra MDX format, and image paths may need updating.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T08:32:05.851178Z","created_by":"cburr","updated_at":"2026-01-08T15:05:38.321726Z","closed_at":"2026-01-08T15:05:38.321726Z","close_reason":"All four case studies restored with detailed content in commit 5356393. Files now have 155-214 lines each with full structure: hero images, technical details tables, stakeholder tables, regulatory context, deliberative prompts, and links to TEA techniques."}
{"id":"AssurancePlatform-qxo","title":"Security: Add rate limiting to critical endpoints","description":"Several security-critical endpoints lack rate limiting:\n\n**Affected endpoints:**\n- /api/users/register - Account creation (spam/bot registrations)\n- /api/invites/[token]/accept - Invite acceptance (brute-force token guessing)\n\nNote: Password reset DOES have rate limiting in the service layer.\n\n**Impact:**\n- User enumeration attacks\n- Brute-force invite token guessing\n- Denial of service through resource exhaustion\n- Bot/spam registrations\n\n**Fix:** Implement rate limiting at the API route level using Next.js middleware. Consider IP-based and user-based limits.\n\n**Confidence:** 85%","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-24T10:27:27.006088Z","updated_at":"2026-01-07T16:46:35.056103Z","closed_at":"2026-01-07T16:46:35.056103Z","close_reason":"Implemented rate limiting for /api/users/register (5 IP/hr, 3 email/hr) and /api/invites/[token]/accept (20 IP/hr, 10 user/hr). Added RateLimitAttempt model, rate-limit-service.ts, and comprehensive tests.","labels":["rate-limiting","security"]}
{"id":"AssurancePlatform-swc","title":"Security: Validate session keys against database revocation","description":"The isValidSession function in lib/auth-helpers.ts (lines 7-30) only performs client-side validation and doesn't check if the refresh token has been revoked in the database.\n\n**Issue:** This function checks for session key expiry but doesn't validate that the key is actually valid in the database (via the revokedAt field in RefreshToken table).\n\n**Attack Scenario:**\n1. User logs in, gets session with refresh token\n2. Admin revokes all user's tokens (security incident)\n3. User's JWT still contains the key and hasn't expired\n4. isValidSession returns true, allowing continued access\n\n**Fix:** Ensure all security-critical code paths use validateRefreshToken() from the refresh-token-service which does proper database validation, or add a note clarifying this is for quick UI checks only.\n\n**Confidence:** 82%","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-24T10:27:32.943297Z","updated_at":"2026-01-09T09:37:09.805923Z","closed_at":"2026-01-09T09:37:09.805923Z","close_reason":"Security concern becomes irrelevant once RefreshToken is removed in 5fm (JWT-only auth)","labels":["auth","security"],"dependencies":[{"issue_id":"AssurancePlatform-swc","depends_on_id":"AssurancePlatform-dpk","type":"parent-child","created_at":"2026-01-09T09:39:04.654305Z","created_by":"cburr"}]}
{"id":"AssurancePlatform-tk1","title":"Phase 2b: Documentation Migration (Docusaurus to Nextra)","description":"Migrate documentation from Docusaurus to Nextra for better Next.js integration.\n\nTasks:\n- [x] Evaluate Nextra configuration options\n- [x] Create Nextra project structure\n- [x] Migrate MDX content files\n- [x] Adapt custom React components\n- [x] Configure navigation ordering (_meta.ts files)\n- [x] Process pageMap for hidden items\n- [ ] Configure search (Flexsearch) - DEFERRED\n- [x] Set up CI/CD for docs deployment\n- [x] Update documentation URLs/redirects (/documentation → /docs)\n\nStructure:\n- content/ directory with MDX files\n- components/docs/ for documentation-specific components\n- Nextra 4.x (App Router compatible)\n\nDeferred:\n- Search functionality (Flexsearch)\n- Versioning","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-07T12:58:03.913543Z","created_by":"cburr","updated_at":"2026-01-07T13:00:15.696017Z","labels":["documentation"],"deleted_at":"2026-01-07T13:00:15.696017Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"AssurancePlatform-uvd","title":"Phase 2a: DevOps \u0026 CI/CD","description":"Address CI/CD pipeline issues and improve deployment reliability.\n\nTasks:\n- [x] Audit current CI/CD pipeline configuration\n- [x] Implement health check endpoint (/api/health)\n- [x] Add pre-build validation (lint + type-check)\n- [x] Add deployment error handling with retry\n- [x] Add deployment notifications (GitHub summaries)\n- [x] Configure Azure health probe\n\nFiles changed:\n- app/api/health/route.ts (created)\n- .github/workflows/build.yaml (modified)\n- biome.json (modified)\n\nAcceptance Criteria:\n- /api/health returns 200 when DB connected, 503 when not\n- Lint/type-check failures block builds\n- Webhook retries on failure\n- Deployments complete without manual intervention","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-07T12:58:03.593812Z","created_by":"cburr","updated_at":"2026-01-07T13:00:12.657522Z","labels":["devops"],"deleted_at":"2026-01-07T13:00:12.657522Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"AssurancePlatform-wk0","title":"Security: Enable email verification for invite acceptance","description":"The acceptInvite function in lib/services/case-permission-service.ts (lines 706-710) has email verification commented out, allowing any authenticated user to accept invites meant for specific email addresses.\n\n**Attack Scenario:**\n1. Admin invites alice@company.com with ADMIN permissions\n2. Attacker bob@attacker.com creates account and logs in\n3. Bob intercepts/discovers the invite token\n4. Bob accepts the invite and gains ADMIN access to the case\n\n**Impact:** Authorization bypass allowing privilege escalation.\n\n**Fix:** Enable the email verification check that is already implemented but commented out.\n\n**Confidence:** 90%","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-24T10:27:11.529298Z","updated_at":"2026-01-07T16:00:20.645569Z","closed_at":"2026-01-07T16:00:20.645569Z","close_reason":"Fixed: enabled email verification, added transaction for race condition protection, explicit null checks, and security audit logging","labels":["auth","security"]}
{"id":"AssurancePlatform-yiy","title":"Add search functionality to documentation (Flexsearch)","description":"The Nextra documentation site currently has no search functionality.\n\nImplement Flexsearch for documentation search as deferred from Phase 2b.\n\nLocation: content/ and components/docs/","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-07T13:00:45.986902Z","created_by":"cburr","updated_at":"2026-01-07T13:02:12.953997Z","labels":["documentation"],"deleted_at":"2026-01-07T13:02:12.953997Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
